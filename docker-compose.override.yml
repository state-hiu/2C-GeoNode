version: '2.2'
services:
  django:
    volumes:
      - '.:/usr/src/sc'
    environment:
      DEBUG: 'False'
      GEONODE_LB_HOST_IP: secondarycities.geonode.state.gov
      GEONODE_LB_PORT: 80
      SITEURL: https://secondarycities.geonode.state.gov/
      ALLOWED_HOSTS: "['secondarycities.geonode.state.gov']"
      GEOSERVER_PUBLIC_LOCATION: http://secondarycities.geonode.state.gov/gs/
      GEOSERVER_WEB_UI_LOCATION: http://secondarycities.geonode.state.gov/geoserver/

  celery:
    environment:
      DEBUG: 'False'
      GEONODE_LB_HOST_IP: secondarycities.geonode.state.gov
      GEONODE_LB_PORT: 80
      SITEURL: https://secondarycities.geonode.state.gov/
      ALLOWED_HOSTS: "['secondarycities.geonode.state.gov', ]"
      GEOSERVER_PUBLIC_LOCATION: https://secondarycities.geonode.state.gov/gs/
      GEOSERVER_WEB_UI_LOCATION: https://secondarycities.geonode.state.gov/geoserver/

  geoserver:
    environment:
      GEONODE_LB_HOST_IP: secondarycities.geonode.state.gov
      GEONODE_LB_PORT: 80
      NGINX_BASE_URL: https://secondarycities.geonode.state.gov/

volumes:
  geoserver-data-dir:
    external:
       name: ${COMPOSE_PROJECT_NAME}-gsdatadir
  dbdata:
    external:
       name: ${COMPOSE_PROJECT_NAME}-dbdata
       #  dbbackups:
       #    external:
       #     driver: ${BACKUPS_VOLUME_DRIVER}
       #    name: ${COMPOSE_PROJECT_NAME}-dbbackups
  statics:
    external:
      name: ${COMPOSE_PROJECT_NAME}-statics
